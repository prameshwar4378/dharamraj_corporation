<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Bill</title>
    <link rel="stylesheet" href="{% static 'assets/css/materialdesignicons.min.css' %}">

    <style>
        @page {
            size: A4;
            margin: 0;
        }

        body {
            margin: 10px;
            /* Adjust margin as needed */
        }

        .text-center {
            text-align: center;
        }

        .invoice {
            padding: 10px;
            border: 1px solid #ccc;
            max-width: 800px;
            margin: auto;
            font-size: 12px;
            line-height: 24px;
            font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;
            color: #555;
        }

        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5px;
        }

        .invoice-table th,
        .invoice-table td {
            border: 1px solid #ddd;
            padding: 3px;
            text-align: left;
        }

        .invoice-table th,
        .table-footer {
            background-color: #f2f2f2;
        }


        .company-details {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            border-bottom: 2px solid #ccc;
        }

        .logo img {
            max-width: 240px;
            max-height: 240px;
        }

        .info {
            text-align: right;
        }

        .info h1 {
            margin: 0;
            font-size: 1.5em;
        }

        .info p {
            margin: 5px 0;
            font-size: 1em;
            color: #555;
        }

        .customer-details {
            display: flex;
            justify-content: space-between;
            padding: 20px;
        }

        .billing-section,
        .shipping-section,
        .invoice-details {
            width: 50%;
            /* Adjust width as needed */
            margin-top: -30px;
        }

        .billing-section,
        .shipping-section h2,
        .invoice-details h3 {
            color: #333;
            ;
        }

        .billing-section p,
        .shipping-section p,
        .invoice-details p {
            margin: -2px 0;
            color: #555;
        }

        .bill-title {
            background-color: black;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 14px;
            position: relative;
            top: -13px;
        }

        .page-break {
            page-break-before: always;
        }
    </style>
</head>

<body>
    <div class="invoice">
        <div style="margin-bottom:-22px; width:100%; background-color:#f2f2f2;">
            <center><b>ORIGINAL COPY</b></center>
        </div>
        <div class="company-details">
            <div class="logo">
                <!-- Replace the image source with your company logo -->
                <img src="{% static 'assets/images/redpluto_logo.png' %}" alt="Company Logo">
            </div>

            <div class="info">
                <h1>RedPluto Analytics</h1>
                <p style=""><b>Office Address :</b> Bhumi Ind. Area-2, Plot-6, Bangluru Gondal Highway,
                </p>
                <p style="margin-top:-10px;"></p>
                <p style="margin-top:-10px;"><b>GST Number:</b> 24AAVFD3427H1ZB</p>
                <p style="margin-top:-10px;"><b>Contact Details:</b> Rajkot (Gujarat) India. Mobile : +91 8200461535</p>
            </div>
        </div>
        <div class="invoice_details">
            <center>
                <span href="" class="bill-title">Tax Invoice Bill</span>
            </center>
            <div style="display: flex; justify-content: space-between;">
                <span>Invoice Number : <b>{{invoice_details.invoice_number}}</b></span>
                 
                <span>Invoice Date : <b>{{invoice_details.invoice_date}}</b></span>
            </div>
        </div>
        <hr>

        <div class="customer-details">
            <div class="billing-section">
                <h2>Billing To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>

            <div class="shipping-section">
                <h2>Shipping To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>
        </div>

        <table class="invoice-table" border="1" style="100%">
            <thead>
                <tr><b>
                        <th style="text-align:center;" rowspan="2" style="width:10%">Sr. No.</th>
                        <th style="text-align:center;" rowspan="2" style="width:30%">Name of Product / Code</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">HSN / SAC</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Qty</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Rate</th>
                        <th style="text-align:center;" rowspan="2" style="width:5%">Taxable Amount</th>
                        <th style="text-align:center;" colspan="2" style="width:12%">{{gst_type}} </th>
                        <th style="text-align:center;" rowspan="2" style="width:12%">Total</th>
                    </b>
                </tr>
                <tr>
                    <th style="text-align:center;">%</th>
                    <th style="text-align:center;">Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for i in item_rec %}
                <tr>
                    <td style="text-align:center;">{{forloop.counter}}</td>
                    <td> {{i.product.product_code}} - {{i.product}} </td>
                    <td style="text-align:center;">{{i.product.hsn_sac}}</td>
                    <td style="text-align:center;">{{i.quantity}}</td>
                    <td style="text-align:center;">{{i.rate}}</td>
                    <td style="text-align:center;">{{i.taxable_amount}}  </td>
                    <td style="text-align:center;">{{i.gst_percent}} %</td>
                    <td style="text-align:center;">{{i.gst_amount}}</td>
                    <td style="text-align:center;">{{i.total_amount}}</td>
                </tr>
                {% endfor %} 
                <tr>
                    <td></td>
                    <td></td>
                    <td style="text-align:center;" class="table-footer"><b>Total</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_quantity}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_rate}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_taxable_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_gst_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{grand_total_amount}}</b></td>
                </tr>

            </tbody>
        </table>


        <div style="display:flex; flex-direction:row;">
            <div style="width:60%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            {% if latest_balance < 0 %}
                            <th colspan="2" style="text-align:center;width:50%;background:#FFBABA;">Available Balance </th>
                            {% else %}
                            <th colspan="2" style="text-align:center;width:50%;background:#C6FFBA;">Available Balance </th>
                            {% endif %}
                            <td colspan="2" style="text-align:center;width:50%;"><b>
                                {% if latest_balance < 0 %}
                                    <span style="color:red;"><b>&#8377; {{latest_balance}}.00</b></span>
                                    {% else %}
                                    <span style="color:green;"><b>&#8377; {{latest_balance}}.00</b></span>
                                {% endif %}
                            </b></td>
                        </tr>
                    </thead> 
                </table>

                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Bank Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="">
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Bank Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Acc Holder Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Account Number : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Branch IFSC : </li>
                                </ul>
                            </td>
                            <td>
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Shree Rajkot District cooperative bank
                                        Ltd. </li>
                                    <li style="margin-top:-7px; font-size:10px;">RedPluto Analytics </li>
                                    <li style="margin-top:-7px; font-size:10px;">114015434644 </li>
                                    <li style="margin-top:-7px; font-size:10px;">GSCB0RJT160 </li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Terms and Conditions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:left;" colspan="2">
                                <ol>
                                    <li style="margin-top:-8px; font-size:10px;">The above price inclusive GST and are
                                        Ex-Factory only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">All Payments are to be made 100 %
                                        Advance by RTGS/NEFT only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Freight Charges will be extra.</li>
                                    <li style="margin-top:-8px; font-size:10px;">We are not responsible for any demage
                                        during transportation.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Subject to Rajkot Jurisdiction.
                                        "E.&.O.E"</li>
                                    <li style="margin-top:-8px; font-size:10px;">Company can change above prices without
                                        any prior notice and information.</li>
                                </ol>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="width:40%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <tbody>
                        <tr>
                            <td style="text-align:left;">Taxable Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_taxable_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">GST Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_gst_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Packing + Transport : </td>
                            {% if invoice_details.transportation_charges or invoice_details.packing_charges %}
                            <td style="text-align:left;"><b> &#8377;{{invoice_details.packing_charges}}.00 + &#8377;{{invoice_details.transportation_charges}}.00</b></td>
                            {% else %}
                            &#8377;0.00
                            {% endif %}
                        </tr>
                         
                        <tr>
                            <td style="text-align:left;">Grand Total Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{grand_total_amount}}.00</b></td>
                        </tr> 
                        <tr>
                            <th colspan="2" style="text-align:center;">Amount in Word</th>
                        </tr>
                        <tr>
                            <td colspan="2" style="text-align:center;">
                                <span id="lblAmtInWord1"></span>
                            </td>

                    </tbody>

                </table>
                <br><br><br><br>
                <center>
                    <h5 style="font-weight:bold;"><strong>For, RedPluto Analytics</strong></h5>
                    <h5 style="margin-top:-20px;">Authorised Signatory</h5>
                </center>
            </div>
        </div>
    </div>


    
    <div class="invoice page-break">
        <div style="margin-bottom:-22px; width:100%; background-color:#f2f2f2;">
            <center><b>DUPLICATE COPY</b></center>
        </div>
        <div class="company-details">
            <div class="logo">
                <!-- Replace the image source with your company logo -->
                <img src="{% static 'assets/images/redpluto_logo.png' %}" alt="Company Logo">
            </div>

            <div class="info">
                <h1>RedPluto Analytics</h1>
                <p style=""><b>Office Address :</b> Bhumi Ind. Area-2, Plot-6, Bangluru Gondal Highway,
                </p>
                <p style="margin-top:-10px;"></p>
                <p style="margin-top:-10px;"><b>GST Number:</b> 24AAVFD3427H1ZB</p>
                <p style="margin-top:-10px;"><b>Contact Details:</b> Rajkot (Gujarat) India. Mobile : +91 8200461535</p>
            </div>
        </div>
        <div class="invoice_details">
            <center>
                <span href="" class="bill-title">Tax Invoice Bill</span>
            </center>
            <div style="display: flex; justify-content: space-between;">
                <span>Invoice Number : <b>{{invoice_details.invoice_number}}</b></span>
                 
                <span>Invoice Date : <b>{{invoice_details.invoice_date}}</b></span>
            </div>
        </div>
        <hr>

        <div class="customer-details">
            <div class="billing-section">
                <h2>Billing To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>

            <div class="shipping-section">
                <h2>Shipping To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>
        </div>

        <table class="invoice-table" border="1" style="100%">
            <thead>
                <tr><b>
                        <th style="text-align:center;" rowspan="2" style="width:10%">Sr. No.</th>
                        <th style="text-align:center;" rowspan="2" style="width:30%">Name of Product / Code</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">HSN / SAC</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Qty</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Rate</th>
                        <th style="text-align:center;" rowspan="2" style="width:5%">Taxable Amount</th>
                        <th style="text-align:center;" colspan="2" style="width:12%">{{gst_type}} </th>
                        <th style="text-align:center;" rowspan="2" style="width:12%">Total</th>
                    </b>
                </tr>
                <tr>
                    <th style="text-align:center;">%</th>
                    <th style="text-align:center;">Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for i in item_rec %}
                <tr>
                    <td style="text-align:center;">{{forloop.counter}}</td>
                    <td> {{i.product.product_code}} - {{i.product}} </td>
                    <td style="text-align:center;">{{i.product.hsn_sac}}</td>
                    <td style="text-align:center;">{{i.quantity}}</td>
                    <td style="text-align:center;">{{i.rate}}</td>
                    <td style="text-align:center;">{{i.taxable_amount}}  </td>
                    <td style="text-align:center;">{{i.gst_percent}} %</td>
                    <td style="text-align:center;">{{i.gst_amount}}</td>
                    <td style="text-align:center;">{{i.total_amount}}</td>
                </tr>
                {% endfor %} 
                <tr>
                    <td></td>
                    <td></td>
                    <td style="text-align:center;" class="table-footer"><b>Total</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_quantity}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_rate}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_taxable_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_gst_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{grand_total_amount}}</b></td>
                </tr>

            </tbody>
        </table>




        <div style="display:flex; flex-direction:row;">
            <div style="width:60%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            {% if latest_balance < 0 %}
                            <th colspan="2" style="text-align:center;width:50%;background:#FFBABA;">Available Balance </th>
                            {% else %}
                            <th colspan="2" style="text-align:center;width:50%;background:#C6FFBA;">Available Balance </th>
                            {% endif %}
                            <td colspan="2" style="text-align:center;width:50%;"><b>
                                {% if latest_balance < 0 %}
                                    <span style="color:red;"><b>&#8377; {{latest_balance}}.00</b></span>
                                    {% else %}
                                    <span style="color:green;"><b>&#8377; {{latest_balance}}.00</b></span>
                                {% endif %}
                            </b></td>
                        </tr>
                    </thead> 
                </table>
                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Bank Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="">
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Bank Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Acc Holder Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Account Number : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Branch IFSC : </li>
                                </ul>
                            </td>
                            <td>
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Shree Rajkot District cooperative bank
                                        Ltd. </li>
                                    <li style="margin-top:-7px; font-size:10px;">RedPluto Analytics </li>
                                    <li style="margin-top:-7px; font-size:10px;">114015434644 </li>
                                    <li style="margin-top:-7px; font-size:10px;">GSCB0RJT160 </li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Terms and Conditions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:left;" colspan="2">
                                <ol>
                                    <li style="margin-top:-8px; font-size:10px;">The above price inclusive GST and are
                                        Ex-Factory only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">All Payments are to be made 100 %
                                        Advance by RTGS/NEFT only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Freight Charges will be extra.</li>
                                    <li style="margin-top:-8px; font-size:10px;">We are not responsible for any demage
                                        during transportation.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Subject to Rajkot Jurisdiction.
                                        "E.&.O.E"</li>
                                    <li style="margin-top:-8px; font-size:10px;">Company can change above prices without
                                        any prior notice and information.</li>
                                </ol>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="width:40%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <tbody>
                        <tr>
                            <td style="text-align:left;">Taxable Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_taxable_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">GST Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_gst_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Packing + Transport : </td>
                            {% if invoice_details.transportation_charges or invoice_details.packing_charges %}
                            <td style="text-align:left;"><b> &#8377;{{invoice_details.packing_charges}}.00 + &#8377;{{invoice_details.transportation_charges}}.00</b></td>
                            {% else %}
                            &#8377;0.00
                            {% endif %}
                        </tr>
                         
                        <tr>
                            <td style="text-align:left;">Grand Total Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{grand_total_amount}}.00</b></td>
                        </tr>
                         
                        <tr>
                            <th colspan="2" style="text-align:center;">Amount in Word</th>
                        </tr>
                        <tr>
                            <td colspan="2" style="text-align:center;">
                                <span id="lblAmtInWord2"></span>
                            </td>

                    </tbody>

                </table>
                <br><br><br><br>
                <center>
                    <h5 style="font-weight:bold;"><strong>For, RedPluto Analytics</strong></h5>
                    <h5 style="margin-top:-20px;">Authorised Signatory</h5>
                </center>
            </div>
        </div>
    </div>





    
    <div class="invoice page-break">
        <div style="margin-bottom:-22px; width:100%; background-color:#f2f2f2;">
            <center><b>TRIPLICATE COPY</b></center>
        </div>
        <div class="company-details">
            <div class="logo">
                <!-- Replace the image source with your company logo -->
                <img src="{% static 'assets/images/redpluto_logo.png' %}" alt="Company Logo">
            </div>

            <div class="info">
                <h1>RedPluto Analytics</h1>
                <p style=""><b>Office Address :</b> Bhumi Ind. Area-2, Plot-6, Bangluru Gondal Highway,
                </p>
                <p style="margin-top:-10px;"></p>
                <p style="margin-top:-10px;"><b>GST Number:</b> 24AAVFD3427H1ZB</p>
                <p style="margin-top:-10px;"><b>Contact Details:</b> Rajkot (Gujarat) India. Mobile : +91 8200461535</p>
            </div>
        </div>
        <div class="invoice_details">
            <center>
                <span href="" class="bill-title">Tax Invoice Bill</span>
            </center> 
            <div style="display: flex; justify-content: space-between;">
                <span>Invoice Number : <b>{{invoice_details.invoice_number}}</b></span>
                 
                <span>Invoice Date : <b>{{invoice_details.invoice_date}}</b></span>
            </div>
        </div>
        <hr>

        <div class="customer-details">
            <div class="billing-section">
                <h2>Billing To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>

            <div class="shipping-section">
                <h2>Shipping To</h2>
                <p style="margin-top:-5px;"><b>{{invoice_details.dealer}}</b></p>
                <p style="margin-top:-5px;">{{invoice_details.dealer.address}} </p>
                <p style="margin-top:-5px;">State : {{invoice_details.dealer.state}} </p>
                <p style="margin-top:-5px;">Party GST No: <b>{{invoice_details.dealer.gst_number}}</b></p>
                <p style="margin-top:-5px;">Mobile Number: <b>{{invoice_details.dealer.mobile_no}}</b></p>
            </div>
        </div>

        <table class="invoice-table" border="1" style="100%">
            <thead>
                <tr><b>
                        <th style="text-align:center;" rowspan="2" style="width:10%">Sr. No.</th>
                        <th style="text-align:center;" rowspan="2" style="width:30%">Name of Product / Code</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">HSN / SAC</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Qty</th>
                        <th style="text-align:center;" rowspan="2" style="width:8%">Rate</th>
                        <th style="text-align:center;" rowspan="2" style="width:5%">Taxable Amount</th>
                        <th style="text-align:center;" colspan="2" style="width:12%">{{gst_type}} </th>
                        <th style="text-align:center;" rowspan="2" style="width:12%">Total</th>
                    </b>
                </tr>
                <tr>
                    <th style="text-align:center;">%</th>
                    <th style="text-align:center;">Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for i in item_rec %}
                <tr>
                    <td style="text-align:center;">{{forloop.counter}}</td>
                    <td> {{i.product.product_code}} - {{i.product}} </td>
                    <td style="text-align:center;">{{i.product.hsn_sac}}</td>
                    <td style="text-align:center;">{{i.quantity}}</td>
                    <td style="text-align:center;">{{i.rate}}</td>
                    <td style="text-align:center;">{{i.taxable_amount}}  </td>
                    <td style="text-align:center;">{{i.gst_percent}} %</td>
                    <td style="text-align:center;">{{i.gst_amount}}</td>
                    <td style="text-align:center;">{{i.total_amount}}</td>
                </tr>
                {% endfor %} 
                <tr>
                    <td></td>
                    <td></td>
                    <td style="text-align:center;" class="table-footer"><b>Total</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_quantity}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_rate}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_taxable_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"></td>
                    <td style="text-align:center;" class="table-footer"><b>{{total_gst_amount}}</b></td>
                    <td style="text-align:center;" class="table-footer"><b>{{grand_total_amount}}</b></td>
                </tr>

            </tbody>
        </table>


        <div style="display:flex; flex-direction:row;">
            <div style="width:60%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            {% if latest_balance < 0 %}
                            <th colspan="2" style="text-align:center;width:50%;background:#FFBABA;">Available Balance </th>
                            {% else %}
                            <th colspan="2" style="text-align:center;width:50%;background:#C6FFBA;">Available Balance </th>
                            {% endif %}
                            <td colspan="2" style="text-align:center;width:50%;"><b>
                                {% if latest_balance < 0 %}
                                    <span style="color:red;"><b>&#8377; {{latest_balance}}.00</b></span>
                                    {% else %}
                                    <span style="color:green;"><b>&#8377; {{latest_balance}}.00</b></span>
                                {% endif %}
                            </b></td>
                        </tr>
                    </thead> 
                </table>
                <table class="invoice-table" border="1" style="width:100%;">
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Bank Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="">
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Bank Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Acc Holder Name : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Account Number : </li>
                                    <li style="margin-top:-7px; font-size:10px;">Bank Branch IFSC : </li>
                                </ul>
                            </td>
                            <td>
                                <ul style="list-style-type: none;">
                                    <li style="margin-top:-7px; font-size:10px;">Shree Rajkot District cooperative bank
                                        Ltd. </li>
                                    <li style="margin-top:-7px; font-size:10px;">RedPluto Analytics </li>
                                    <li style="margin-top:-7px; font-size:10px;">114015434644 </li>
                                    <li style="margin-top:-7px; font-size:10px;">GSCB0RJT160 </li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                    <thead>
                        <tr>
                            <th colspan="2" style="text-align:center;">Terms and Conditions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:left;" colspan="2">
                                <ol>
                                    <li style="margin-top:-8px; font-size:10px;">The above price inclusive GST and are
                                        Ex-Factory only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">All Payments are to be made 100 %
                                        Advance by RTGS/NEFT only.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Freight Charges will be extra.</li>
                                    <li style="margin-top:-8px; font-size:10px;">We are not responsible for any demage
                                        during transportation.</li>
                                    <li style="margin-top:-8px; font-size:10px;">Subject to Rajkot Jurisdiction.
                                        "E.&.O.E"</li>
                                    <li style="margin-top:-8px; font-size:10px;">Company can change above prices without
                                        any prior notice and information.</li>
                                </ol>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="width:40%;">
                <table class="invoice-table" border="1" style="width:100%;">
                    <tbody>
                        <tr>
                            <td style="text-align:left;">Taxable Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_taxable_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">GST Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{total_gst_amount}}.00</b></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Packing + Transport : </td>
                            {% if invoice_details.transportation_charges or invoice_details.packing_charges %}
                            <td style="text-align:left;"><b> &#8377;{{invoice_details.packing_charges}}.00 + &#8377;{{invoice_details.transportation_charges}}.00</b></td>
                            {% else %}
                            &#8377;0.00
                            {% endif %}
                        </tr>
                         
                        <tr>
                            <td style="text-align:left;">Grand Total Amount : </td>
                            <td style="text-align:left;"><b>&#8377;  {{grand_total_amount}}.00</b></td>
                        </tr>
                         
                        <tr>
                            <th colspan="2" style="text-align:center;">Amount in Word</th>
                        </tr>
                        <tr>
                            <td colspan="2" style="text-align:center;">
                                <span id="lblAmtInWord3"></span>
                            </td>

                    </tbody>

                </table>
                <br><br><br>
                <center>
                    <h5 style="font-weight:bold;"><strong>For, RedPluto Analytics</strong></h5>
                    <h5 style="margin-top:-20px;">Authorised Signatory</h5>
                </center>
            </div>
        </div>
    </div>

    <script>
        function calculateGSTAmount(totalAmount, gstPercentage) {
            // Ensure totalAmount and gstPercentage are numbers
            totalAmount = parseFloat(totalAmount);
            gstPercentage = parseFloat(gstPercentage);

            // Calculate the GST amount
            const gstAmount = (totalAmount * gstPercentage) / 100;

            return gstAmount;
        }

        // Example usage
        const totalAmount = {
            {
                total_amount
            }
        };
        const gstPercentage = {
            {
                sale_record.gst
            }
        }; // 18% GST
        const gstAmount = calculateGSTAmount(totalAmount, gstPercentage);

        if (gstAmount !== null && gstAmount !== undefined) {
            document.getElementById("lbl_GST_Amount").textContent = gstAmount;
        } else {
            document.getElementById("lbl_GST_Amount").textContent = 0;
        }
    </script>
    <script>
        amt=parseInt({{grand_total_amount}})
        ConvertNumberToWords(amt)
        function ConvertNumberToWords(number) {
            var words = new Array();
            words[0] = '';
            words[1] = 'One';
            words[2] = 'Two';
            words[3] = 'Three';
            words[4] = 'Four';
            words[5] = 'Five';
            words[6] = 'Six';
            words[7] = 'Seven';
            words[8] = 'Eight';
            words[9] = 'Nine';
            words[10] = 'Ten';
            words[11] = 'Eleven';
            words[12] = 'Twelve';
            words[13] = 'Thirteen';
            words[14] = 'Fourteen';
            words[15] = 'Fifteen';
            words[16] = 'Sixteen';
            words[17] = 'Seventeen';
            words[18] = 'Eighteen';
            words[19] = 'Nineteen';
            words[20] = 'Twenty';
            words[30] = 'Thirty';
            words[40] = 'Forty';
            words[50] = 'Fifty';
            words[60] = 'Sixty';
            words[70] = 'Seventy';
            words[80] = 'Eighty';
            words[90] = 'Ninety';
            number = number.toString();
            var atemp = number.split(".");
            var number = atemp[0].split(",").join("");
            var n_length = number.length;
            var words_string = "";
            if (n_length <= 9) {
                var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
                var received_n_array = new Array();
                for (var i = 0; i < n_length; i++) {
                    received_n_array[i] = number.substr(i, 1);
                }
                for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                    n_array[i] = received_n_array[j];
                }
                for (var i = 0, j = 1; i < 9; i++ , j++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        if (n_array[i] == 1) {
                            n_array[j] = 10 + parseInt(n_array[j]);
                            n_array[i] = 0;
                        }
                    }
                }
                value = "";
                for (var i = 0; i < 9; i++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        value = n_array[i] * 10;
                    } else {
                        value = n_array[i];
                    }
                    if (value != 0) {
                        words_string += words[value] + " ";
                    }
                    if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Crores ";
                    }
                    if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Lakhs ";
                    }
                    if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Thousand ";
                    }
                    if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                        words_string += "Hundred and ";
                    } else if (i == 6 && value != 0) {
                        words_string += "Hundred ";
                    }
                }
                words_string = words_string.split("  ").join(" ");
            }
            document.getElementById('lblAmtInWord1').innerHTML = words_string;
            document.getElementById('lblAmtInWord2').innerHTML = words_string;
            document.getElementById('lblAmtInWord3').innerHTML = words_string;
        }

    </script>
</body>

</html>